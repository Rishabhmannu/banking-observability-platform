{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"canDelete":true,"slug":"banking-database-connection-pool-dashboard","url":"/d/banking-db-connection/banking-database-connection-pool-dashboard","expires":"0001-01-01T00:00:00Z","created":"2025-06-25T05:05:19Z","updated":"2025-06-25T05:47:20Z","updatedBy":"Anonymous","createdBy":"Anonymous","version":4,"hasAcl":false,"isFolder":false,"apiVersion":"v0alpha1","folderId":0,"folderUid":"","folderTitle":"General","folderUrl":"","provisioned":false,"provisionedExternalId":"backup-20250625/db-connection-dashboard.json","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":true,"canEdit":true,"canDelete":true}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":1,"links":[],"panels":[{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":70},{"color":"red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":8,"w":6,"x":0,"y":0},"id":1,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.0.0","targets":[{"expr":"banking_db_pool_utilization_percent{service=\"db-demo\"}","refId":"A"}],"title":"Connection Pool Utilization %","type":"gauge"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[{"matcher":{"id":"byName","options":"Active"},"properties":[{"id":"color","value":{"fixedColor":"orange","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Idle"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]}]},"gridPos":{"h":8,"w":6,"x":6,"y":0},"id":2,"options":{"displayLabels":["name","percent"],"legend":{"displayMode":"list","placement":"right","values":[]},"pieType":"donut","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.0.0","targets":[{"expr":"banking_db_pool_connections_active{service=\"db-demo\"}","legendFormat":"Active","refId":"A"},{"expr":"banking_db_pool_connections_idle{service=\"db-demo\"}","legendFormat":"Idle","refId":"B"}],"title":"Active vs Idle Connections","type":"piechart"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":3,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"right"},"tooltip":{"mode":"single"}},"pluginVersion":"8.0.0","targets":[{"expr":"histogram_quantile(0.95, sum(rate(banking_db_connection_acquisition_duration_seconds_bucket[5m])) by (le)) * 1000","legendFormat":"P95","refId":"A"},{"expr":"histogram_quantile(0.99, sum(rate(banking_db_connection_acquisition_duration_seconds_bucket[5m])) by (le)) * 1000","legendFormat":"P99","refId":"B"}],"title":"Connection Acquisition Wait Time (P95/P99)","type":"timeseries"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":8},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"pluginVersion":"8.0.0","targets":[{"expr":"banking_db_pool_connections_active{service=\"db-demo\"}","legendFormat":"Active Connections","refId":"A"},{"expr":"banking_db_pool_connections_idle{service=\"db-demo\"}","legendFormat":"Idle Connections","refId":"B"}],"title":"Connection Pool Status Over Time","type":"timeseries"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ops"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":8},"id":5,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"pluginVersion":"8.0.0","targets":[{"expr":"rate(banking_db_queries_total[1m])","legendFormat":"{{query_type}} - {{status}}","refId":"A"}],"title":"Database Query Rate by Type","type":"timeseries"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ms"},"overrides":[{"matcher":{"id":"byName","options":"Avg Duration (ms)"},"properties":[{"id":"custom.displayMode","value":"gradient-gauge"},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":50},{"color":"red","value":100}]}}]}]},"gridPos":{"h":8,"w":12,"x":0,"y":16},"id":6,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.0.0","targets":[{"expr":"(banking_db_query_duration_seconds_sum / banking_db_query_duration_seconds_count) * 1000","format":"table","instant":true,"refId":"A"}],"title":"Query Performance by Type","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"__name__":true,"instance":true,"job":true,"service":true},"indexByName":{},"renameByName":{"Value":"Avg Duration (ms)","query_type":"Query Type"}}}],"type":"table"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":16},"id":7,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.0","targets":[{"expr":"sum(increase(banking_db_connection_errors_total[5m]))","refId":"A"}],"title":"Connection Errors (Last 5m)","type":"stat"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":24,"x":0,"y":24},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"pluginVersion":"8.0.0","targets":[{"expr":"pg_stat_activity_count{datname=\"bankingdb\"}","legendFormat":"{{state}}","refId":"A"}],"title":"PostgreSQL Database Connection States","type":"timeseries"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":32},"id":9,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.0.0","targets":[{"expr":"banking_db_pool_size{service=\"db-demo\"}","refId":"A"}],"title":"Pool Max Size","type":"stat"}],"refresh":"10s","schemaVersion":30,"style":"dark","tags":["banking","database","connections"],"templating":{"list":[]},"time":{"from":"now-30m","to":"now"},"timepicker":{},"timezone":"","title":"Banking Database Connection Pool Dashboard","uid":"banking-db-connection","version":4}}
